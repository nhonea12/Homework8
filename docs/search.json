[
  {
    "objectID": "basic_modeling_practice.html",
    "href": "basic_modeling_practice.html",
    "title": "ST 558 Homework 8",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n#install.packages(\"tidymodels\")\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.9     ✔ rsample      1.3.1\n✔ dials        1.4.2     ✔ tailor       0.1.0\n✔ infer        1.0.9     ✔ tune         2.0.1\n✔ modeldata    1.5.1     ✔ workflows    1.3.0\n✔ parsnip      1.3.3     ✔ workflowsets 1.1.1\n✔ recipes      1.3.1     ✔ yardstick    1.3.2\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\n# read in the Seoul Bike Data\nbike_data &lt;- read_csv(\"SeoulBikeData.csv\", locale=locale(encoding=\"latin1\"))\n\nRows: 8760 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (4): Date, Seasons, Holiday, Functioning Day\ndbl (10): Rented Bike Count, Hour, Temperature(°C), Humidity(%), Wind speed ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# check for missing values\ncolSums(is.na(bike_data))\n\n                     Date         Rented Bike Count                      Hour \n                        0                         0                         0 \n          Temperature(°C)               Humidity(%)          Wind speed (m/s) \n                        0                         0                         0 \n         Visibility (10m) Dew point temperature(°C)   Solar Radiation (MJ/m2) \n                        0                         0                         0 \n             Rainfall(mm)             Snowfall (cm)                   Seasons \n                        0                         0                         0 \n                  Holiday           Functioning Day \n                        0                         0 \n\n\nThe above code reads in the data, and then checks to see how many missing observation are in each column of our data. Luckily, there are no missing observations in any of our columns!\n\n# check the column types and column values\nstr(bike_data)\n\nspc_tbl_ [8,760 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ Date                     : chr [1:8760] \"01/12/2017\" \"01/12/2017\" \"01/12/2017\" \"01/12/2017\" ...\n $ Rented Bike Count        : num [1:8760] 254 204 173 107 78 100 181 460 930 490 ...\n $ Hour                     : num [1:8760] 0 1 2 3 4 5 6 7 8 9 ...\n $ Temperature(°C)          : num [1:8760] -5.2 -5.5 -6 -6.2 -6 -6.4 -6.6 -7.4 -7.6 -6.5 ...\n $ Humidity(%)              : num [1:8760] 37 38 39 40 36 37 35 38 37 27 ...\n $ Wind speed (m/s)         : num [1:8760] 2.2 0.8 1 0.9 2.3 1.5 1.3 0.9 1.1 0.5 ...\n $ Visibility (10m)         : num [1:8760] 2000 2000 2000 2000 2000 ...\n $ Dew point temperature(°C): num [1:8760] -17.6 -17.6 -17.7 -17.6 -18.6 -18.7 -19.5 -19.3 -19.8 -22.4 ...\n $ Solar Radiation (MJ/m2)  : num [1:8760] 0 0 0 0 0 0 0 0 0.01 0.23 ...\n $ Rainfall(mm)             : num [1:8760] 0 0 0 0 0 0 0 0 0 0 ...\n $ Snowfall (cm)            : num [1:8760] 0 0 0 0 0 0 0 0 0 0 ...\n $ Seasons                  : chr [1:8760] \"Winter\" \"Winter\" \"Winter\" \"Winter\" ...\n $ Holiday                  : chr [1:8760] \"No Holiday\" \"No Holiday\" \"No Holiday\" \"No Holiday\" ...\n $ Functioning Day          : chr [1:8760] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   Date = col_character(),\n  ..   `Rented Bike Count` = col_double(),\n  ..   Hour = col_double(),\n  ..   `Temperature(°C)` = col_double(),\n  ..   `Humidity(%)` = col_double(),\n  ..   `Wind speed (m/s)` = col_double(),\n  ..   `Visibility (10m)` = col_double(),\n  ..   `Dew point temperature(°C)` = col_double(),\n  ..   `Solar Radiation (MJ/m2)` = col_double(),\n  ..   `Rainfall(mm)` = col_double(),\n  ..   `Snowfall (cm)` = col_double(),\n  ..   Seasons = col_character(),\n  ..   Holiday = col_character(),\n  ..   `Functioning Day` = col_character()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \n\n\nThe str() function allows us the examine the structure of our data. Here we can see which of our variables are numeric, and which ones are character. We can see the first few observations of each column, so we know whether the values makes sense in context, and we see the number of observations in each column, which is 8760 for every variable in our data set.\n\n# basic summaru stats of numeric variables\nmean(bike_data$`Rented Bike Count`)\n\n[1] 704.6021\n\nsd(bike_data$`Rented Bike Count`)\n\n[1] 644.9975\n\n\nThe mean number of rented bikes per hour in Seoul in 2018 was 704.6021. The standard deviation of this mean is 644.9975.\n\nmean(bike_data$Hour)\n\n[1] 11.5\n\nsd(bike_data$Hour)\n\n[1] 6.922582\n\n\nThe mean of our hour variable is 11.5. The standard deviation is 6.922582. These number are not very useful in context.\n\nmean(bike_data$`Temperature(°C)`)\n\n[1] 12.88292\n\nsd(bike_data$`Temperature(°C)`)\n\n[1] 11.94483\n\n\nThe mean hourly temperature in Seoul in 2018 was 12.88292°C, with a standard deviation of 11.94483°C.\n\nmean(bike_data$`Humidity(%)`)\n\n[1] 58.22626\n\nsd(bike_data$`Humidity(%)`)\n\n[1] 20.36241\n\n\nThe mean hourly humidity in Seoul in 2018 was 58.22626%, with a standard deviation of 20.36241%.\n\nmean(bike_data$`Visibility (10m)`)\n\n[1] 1436.826\n\nsd(bike_data$`Visibility (10m)`)\n\n[1] 608.2987\n\n\nThe mean hourly visibility in Seoul in 2018 was 14368.26 meters, with a standard deviation of 6082.987 meters.\n\nmean(bike_data$`Dew point temperature(°C)`)\n\n[1] 4.073813\n\nsd(bike_data$`Dew point temperature(°C)`)\n\n[1] 13.06037\n\n\nThe mean hourly dew point temperature in Seoul in 2018 was 4.073813°C, with a standard deviation of 13.06037°C.\n\nmean(bike_data$`Solar Radiation (MJ/m2)`)\n\n[1] 0.5691107\n\nsd(bike_data$`Solar Radiation (MJ/m2)`)\n\n[1] 0.8687462\n\n\nThe mean hourly solar radiation level in Seoul in 2018 was 0.5691107 MJ/m2, with a standard deviation of 0.8687462 MJ/m2.\n\nmean(bike_data$`Rainfall(mm)`)\n\n[1] 0.1486872\n\nsd(bike_data$`Rainfall(mm)`)\n\n[1] 1.128193\n\n\nThe mean hourly rainfall in Seoul in 2018 was 0.1486872mm, with a standard deviation of 1.128193mm.\n\nmean(bike_data$`Snowfall (cm)`)\n\n[1] 0.07506849\n\nsd(bike_data$`Snowfall (cm)`)\n\n[1] 0.4367462\n\n\nThe mean hourly snowfall in Seoul in 2018 was 0.07506849cm, with a standard deviation of 0.4367462cm.\n\n# check unique levels of categorical variables\nunique(bike_data$Seasons)\n\n[1] \"Winter\" \"Spring\" \"Summer\" \"Autumn\"\n\nunique(bike_data$Holiday)\n\n[1] \"No Holiday\" \"Holiday\"   \n\nunique(bike_data$`Functioning Day`)\n\n[1] \"Yes\" \"No\" \n\n# convert to Date variable to date type using lubridate package\nbike_data &lt;- bike_data |&gt; \n  mutate(date = dmy(Date)) |&gt; \n  select(-Date)\n\n# convert character variables to factors\nbike_data &lt;- bike_data |&gt; \n  mutate(\n    season = as.factor(Seasons),\n    holiday = as.factor(Holiday),\n    functioning_day = as.factor(`Functioning Day`)\n  ) |&gt; \n  select(-c(Seasons, Holiday, `Functioning Day`))\n\n# rename column names that need to be fixed\nbike_data |&gt; names()\n\n [1] \"Rented Bike Count\"         \"Hour\"                     \n [3] \"Temperature(°C)\"           \"Humidity(%)\"              \n [5] \"Wind speed (m/s)\"          \"Visibility (10m)\"         \n [7] \"Dew point temperature(°C)\" \"Solar Radiation (MJ/m2)\"  \n [9] \"Rainfall(mm)\"              \"Snowfall (cm)\"            \n[11] \"date\"                      \"season\"                   \n[13] \"holiday\"                   \"functioning_day\"          \n\nbike_data &lt;- bike_data |&gt; \n  rename(\n    \"bike_count\" = \"Rented Bike Count\",\n    \"hour\" = \"Hour\",\n    \"temperature\" = \"Temperature(°C)\",\n    \"humidity\" = \"Humidity(%)\",\n    \"wind_speed\" = \"Wind speed (m/s)\",\n    \"visibility\" = \"Visibility (10m)\",\n    \"dew_point_temp\" = \"Dew point temperature(°C)\",\n    \"solar_radiation\" = \"Solar Radiation (MJ/m2)\",\n    \"rainfall\" = \"Rainfall(mm)\",\n    \"snowfall\" = \"Snowfall (cm)\"\n  )\n\nbike_data |&gt; names()\n\n [1] \"bike_count\"      \"hour\"            \"temperature\"     \"humidity\"       \n [5] \"wind_speed\"      \"visibility\"      \"dew_point_temp\"  \"solar_radiation\"\n [9] \"rainfall\"        \"snowfall\"        \"date\"            \"season\"         \n[13] \"holiday\"         \"functioning_day\"\n\n\nThe above code makes the bike rental data easier to work with in several. When the data was read in, Date was included as a character variable, but after using the dmy() function from the lubridate package, the date variable (now lowercase) is of the date data type. After looking at the unique levels of each other character variable, the remaining character variables have been stored as factors, with their names updated to be more compatible with R.\nAll the numeric variables also had their names updated, so now every variable in our data set has lower, snake-case variable names.\n\n# summary stats across categorical variables (especially for rented bike count)\n# mean and standard deviation of bikes rented per hour grouped by season\nbike_data |&gt; \n  group_by(season) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 4 × 3\n  season mean_rentals sd_rentals\n  &lt;fct&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn         820.       651.\n2 Spring         730.       622.\n3 Summer        1034.       690.\n4 Winter         226.       150.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by the season.\n\n# mean and standard deviation of bikes rented per hour grouped by whether is it a holiday or not\nbike_data |&gt; \n  group_by(holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  holiday    mean_rentals sd_rentals\n  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Holiday            500.       571.\n2 No Holiday         715.       647.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by whether it is a holiday.\n\n# mean and standard deviation of bikes rented per hour grouped by whether the bike rental place is available (will be mean and sd 0 when non-functional hours)\nbike_data |&gt; \n  group_by(functioning_day) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  functioning_day mean_rentals sd_rentals\n  &lt;fct&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 No                        0          0 \n2 Yes                     729.       642.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by whether it is functioning hours. During non-functioning hours, it makes sense that there are no bike rentals to observe.\n\n# # mean and standard deviation of bikes rented per hour grouped by season and whether it is a holiday\nbike_data |&gt; \n  group_by(season, holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n`summarise()` has grouped output by 'season'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 8 × 4\n# Groups:   season [4]\n  season holiday    mean_rentals sd_rentals\n  &lt;fct&gt;  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn Holiday            758.       660.\n2 Autumn No Holiday         823.       651.\n3 Spring Holiday            635.       609.\n4 Spring No Holiday         733.       622.\n5 Summer Holiday           1022.       564.\n6 Summer No Holiday        1034.       693.\n7 Winter Holiday            157.       108.\n8 Winter No Holiday         232.       152.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by both the season and whether it is a holiday.\n\n# summarize across days, so there is only one observation for each day\nbike_data &lt;- bike_data |&gt; \n  group_by(date, season, holiday) |&gt; \n  summarize(\n    bike_count = sum(bike_count),\n    rainfall = sum(rainfall),\n    snowfall = sum(snowfall),\n    mean_temp = mean(temperature),\n    mean_humidity = mean(humidity),\n    mean_wind_speed = mean(wind_speed),\n    mean_visibility = mean(visibility),\n    mean_dew_point = mean(dew_point_temp),\n    mean_solar_rad = mean(solar_radiation)\n  )\n\n`summarise()` has grouped output by 'date', 'season'. You can override using\nthe `.groups` argument.\n\n\nThe above code summarizes across days, so bike_data now stores daily bike rental data instead of hourly data. bike_count, rainfall, and snowfall now store the daily totals instead of hourly totals. All the other numeric variables tracking the weather store daily averages.\n\n# recreate above summary stats\n# mean and standard deviation of bikes rented per day grouped by season\nbike_data |&gt; \n  group_by(season) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 4 × 3\n  season mean_rentals sd_rentals\n  &lt;fct&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn       19670.      9398.\n2 Spring       17521.      8672.\n3 Summer       24818.      7297.\n4 Winter        5413.      1808.\n\n\nThe above table gives us the mean and standard deviation of daily bike rentals in Seoul in 2018, grouped by the season.\n\n# mean and standard deviation of bikes rented per day grouped by whether is it a holiday or not\nbike_data |&gt; \n  group_by(holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  holiday    mean_rentals sd_rentals\n  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Holiday          11994.     10621.\n2 No Holiday       17165.     10191.\n\n\nThe above table gives us the mean and standard deviation of daily bike rentals in Seoul in 2018, grouped by whether it is a holiday.\n\n# # mean and standard deviation of bikes rented per day grouped by season and whether it is a holiday\nbike_data |&gt; \n  group_by(season, holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n`summarise()` has grouped output by 'season'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 8 × 4\n# Groups:   season [4]\n  season holiday    mean_rentals sd_rentals\n  &lt;fct&gt;  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn Holiday          18204.     11288.\n2 Autumn No Holiday       19756.      9349.\n3 Spring Holiday          15247.     10917.\n4 Spring No Holiday       17597.      8653.\n5 Summer Holiday          24532.      8438.\n6 Summer No Holiday       24824.      7324.\n7 Winter Holiday           3759       1561.\n8 Winter No Holiday        5574.      1757.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by both the season and whether it is a holiday.\n\n# plot the data to explore relationships\n# plot rented bikes by day, grouped by holiday\nggplot(data = bike_data, aes(x = date, y = bike_count, colour = holiday)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Whether it is a Holiday\",\n    x = \"Date\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Holiday?\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented per day in Seoul in 2018, with the points colored by whether the day was a holiday.\n\n# plot rented bikes by rainfall, grouped by season\nggplot(data = bike_data, aes(x = rainfall, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Rainfall (mm)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the total rainfall that day. The points are colored by the season of the day. It makes sense that many of the points are at 0 on the x-axis, as many days have no rain at all.\n\n# plot rented bikes by snowfall, grouped by season\nggplot(data = bike_data, aes(x = snowfall, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Snowfall (cm)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the total snowfall that day. The points are colored by the season of the day. It makes sense that many of the points are at 0 on the x-axis, as many days have no snow at all. All of the points not at 0 on the x-axis are in the Autumn or Winter, with the majority in the Winter, which makes sense as these are the coldest months in the Northern Hemisphere.\n\n# plot rented bikes by humidity, grouped by season\nggplot(data = bike_data, aes(x = mean_humidity, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Humidity for the Day (%)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average humidity that day. The points are colored by the season of the day.\n\n# plot rented bikes by temperature, grouped by season\nggplot(data = bike_data, aes(x = mean_temp, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Temperature for the Day (°C)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average temperature that day. The points are colored by the season of the day. It appears the there is a positive correlation between temperature and daily bike rentals, possibly because people are more likely to want to do outdoor activities like ride a bike when it is warmer outside. However, there may be some non-linear effect, where when the temperature gets too high, the number of bike rentals goes down, as people feel it is too hot.\n\n# plot rented bikes by solar radiation, grouped by season\nggplot(data = bike_data, aes(x = mean_solar_rad, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Solar Radiation for the Day (MJ/m2)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average solar radiation that day. The points are colored by the season of the day. It appears the there is a positive correlation between solar radiation and daily bike rentals, possibly because people are more likely to want to do outdoor activities like ride a bike when it is sunny outside.\n\n# plot rented bikes by visibility, grouped by season\nggplot(data = bike_data, aes(x = mean_visibility, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Visibility for the Day (10m)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average visibility that day. The points are colored by the season of the day.\n\n# report correlations for all the numeric variables in the data\ncor(bike_data |&gt; \n      ungroup() |&gt; \n      select(where(is.numeric)), \n    method = \"pearson\")\n\n                 bike_count    rainfall    snowfall   mean_temp mean_humidity\nbike_count       1.00000000 -0.21425244 -0.24083601  0.69982423    0.02815752\nrainfall        -0.21425244  1.00000000 -0.02249252  0.13981161    0.52824072\nsnowfall        -0.24083601 -0.02249252  1.00000000 -0.26795142    0.06424711\nmean_temp        0.69982423  0.13981161 -0.26795142  1.00000000    0.40146073\nmean_humidity    0.02815752  0.52824072  0.06424711  0.40146073    1.00000000\nmean_wind_speed -0.17485945 -0.08107366  0.02079190 -0.25895565   -0.22416837\nmean_visibility  0.14537586 -0.21828398 -0.10129611  0.01057752   -0.55648011\nmean_dew_point   0.60264807  0.26064386 -0.21082326  0.96261370    0.63026510\nmean_solar_rad   0.68406924 -0.32323141 -0.23149054  0.54348190   -0.27353406\n                mean_wind_speed mean_visibility mean_dew_point mean_solar_rad\nbike_count          -0.17485945      0.14537586      0.6026481      0.6840692\nrainfall            -0.08107366     -0.21828398      0.2606439     -0.3232314\nsnowfall             0.02079190     -0.10129611     -0.2108233     -0.2314905\nmean_temp           -0.25895565      0.01057752      0.9626137      0.5434819\nmean_humidity       -0.22416837     -0.55648011      0.6302651     -0.2735341\nmean_wind_speed      1.00000000      0.19038959     -0.2841044      0.1076893\nmean_visibility      0.19038959      1.00000000     -0.1458334      0.2646339\nmean_dew_point      -0.28410440     -0.14583339      1.0000000      0.3774974\nmean_solar_rad       0.10768927      0.26463391      0.3774974      1.0000000\n\n\nThe above table is a correlation matrix of all the numeric variables in our data set. The most important row and column concerning bike rentals is the first row and first column (which give the same information). This row/column tells us the direction and strength of the linear relationships between daily bike rentals in Seoul and the other numeric variables in our relationship. Positive numbers indicate a positive relationship, while negative numbers indicate a negative, or inverse, relationship. The closer to 1 or -1, the stronger the linear relationship is. The closer to 0, the weaker the linear relationship is."
  },
  {
    "objectID": "basic_modeling_practice.html#data-reading-and-eda",
    "href": "basic_modeling_practice.html#data-reading-and-eda",
    "title": "ST 558 Homework 8",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   4.0.0     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n#install.packages(\"tidymodels\")\nlibrary(tidymodels)\n\n── Attaching packages ────────────────────────────────────── tidymodels 1.4.1 ──\n✔ broom        1.0.9     ✔ rsample      1.3.1\n✔ dials        1.4.2     ✔ tailor       0.1.0\n✔ infer        1.0.9     ✔ tune         2.0.1\n✔ modeldata    1.5.1     ✔ workflows    1.3.0\n✔ parsnip      1.3.3     ✔ workflowsets 1.1.1\n✔ recipes      1.3.1     ✔ yardstick    1.3.2\n── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──\n✖ scales::discard() masks purrr::discard()\n✖ dplyr::filter()   masks stats::filter()\n✖ recipes::fixed()  masks stringr::fixed()\n✖ dplyr::lag()      masks stats::lag()\n✖ yardstick::spec() masks readr::spec()\n✖ recipes::step()   masks stats::step()\n\n# read in the Seoul Bike Data\nbike_data &lt;- read_csv(\"SeoulBikeData.csv\", locale=locale(encoding=\"latin1\"))\n\nRows: 8760 Columns: 14\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr  (4): Date, Seasons, Holiday, Functioning Day\ndbl (10): Rented Bike Count, Hour, Temperature(°C), Humidity(%), Wind speed ...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# check for missing values\ncolSums(is.na(bike_data))\n\n                     Date         Rented Bike Count                      Hour \n                        0                         0                         0 \n          Temperature(°C)               Humidity(%)          Wind speed (m/s) \n                        0                         0                         0 \n         Visibility (10m) Dew point temperature(°C)   Solar Radiation (MJ/m2) \n                        0                         0                         0 \n             Rainfall(mm)             Snowfall (cm)                   Seasons \n                        0                         0                         0 \n                  Holiday           Functioning Day \n                        0                         0 \n\n\nThe above code reads in the data, and then checks to see how many missing observation are in each column of our data. Luckily, there are no missing observations in any of our columns!\n\n# check the column types and column values\nstr(bike_data)\n\nspc_tbl_ [8,760 × 14] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ Date                     : chr [1:8760] \"01/12/2017\" \"01/12/2017\" \"01/12/2017\" \"01/12/2017\" ...\n $ Rented Bike Count        : num [1:8760] 254 204 173 107 78 100 181 460 930 490 ...\n $ Hour                     : num [1:8760] 0 1 2 3 4 5 6 7 8 9 ...\n $ Temperature(°C)          : num [1:8760] -5.2 -5.5 -6 -6.2 -6 -6.4 -6.6 -7.4 -7.6 -6.5 ...\n $ Humidity(%)              : num [1:8760] 37 38 39 40 36 37 35 38 37 27 ...\n $ Wind speed (m/s)         : num [1:8760] 2.2 0.8 1 0.9 2.3 1.5 1.3 0.9 1.1 0.5 ...\n $ Visibility (10m)         : num [1:8760] 2000 2000 2000 2000 2000 ...\n $ Dew point temperature(°C): num [1:8760] -17.6 -17.6 -17.7 -17.6 -18.6 -18.7 -19.5 -19.3 -19.8 -22.4 ...\n $ Solar Radiation (MJ/m2)  : num [1:8760] 0 0 0 0 0 0 0 0 0.01 0.23 ...\n $ Rainfall(mm)             : num [1:8760] 0 0 0 0 0 0 0 0 0 0 ...\n $ Snowfall (cm)            : num [1:8760] 0 0 0 0 0 0 0 0 0 0 ...\n $ Seasons                  : chr [1:8760] \"Winter\" \"Winter\" \"Winter\" \"Winter\" ...\n $ Holiday                  : chr [1:8760] \"No Holiday\" \"No Holiday\" \"No Holiday\" \"No Holiday\" ...\n $ Functioning Day          : chr [1:8760] \"Yes\" \"Yes\" \"Yes\" \"Yes\" ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   Date = col_character(),\n  ..   `Rented Bike Count` = col_double(),\n  ..   Hour = col_double(),\n  ..   `Temperature(°C)` = col_double(),\n  ..   `Humidity(%)` = col_double(),\n  ..   `Wind speed (m/s)` = col_double(),\n  ..   `Visibility (10m)` = col_double(),\n  ..   `Dew point temperature(°C)` = col_double(),\n  ..   `Solar Radiation (MJ/m2)` = col_double(),\n  ..   `Rainfall(mm)` = col_double(),\n  ..   `Snowfall (cm)` = col_double(),\n  ..   Seasons = col_character(),\n  ..   Holiday = col_character(),\n  ..   `Functioning Day` = col_character()\n  .. )\n - attr(*, \"problems\")=&lt;externalptr&gt; \n\n\nThe str() function allows us the examine the structure of our data. Here we can see which of our variables are numeric, and which ones are character. We can see the first few observations of each column, so we know whether the values makes sense in context, and we see the number of observations in each column, which is 8760 for every variable in our data set.\n\n# basic summaru stats of numeric variables\nmean(bike_data$`Rented Bike Count`)\n\n[1] 704.6021\n\nsd(bike_data$`Rented Bike Count`)\n\n[1] 644.9975\n\n\nThe mean number of rented bikes per hour in Seoul in 2018 was 704.6021. The standard deviation of this mean is 644.9975.\n\nmean(bike_data$Hour)\n\n[1] 11.5\n\nsd(bike_data$Hour)\n\n[1] 6.922582\n\n\nThe mean of our hour variable is 11.5. The standard deviation is 6.922582. These number are not very useful in context.\n\nmean(bike_data$`Temperature(°C)`)\n\n[1] 12.88292\n\nsd(bike_data$`Temperature(°C)`)\n\n[1] 11.94483\n\n\nThe mean hourly temperature in Seoul in 2018 was 12.88292°C, with a standard deviation of 11.94483°C.\n\nmean(bike_data$`Humidity(%)`)\n\n[1] 58.22626\n\nsd(bike_data$`Humidity(%)`)\n\n[1] 20.36241\n\n\nThe mean hourly humidity in Seoul in 2018 was 58.22626%, with a standard deviation of 20.36241%.\n\nmean(bike_data$`Visibility (10m)`)\n\n[1] 1436.826\n\nsd(bike_data$`Visibility (10m)`)\n\n[1] 608.2987\n\n\nThe mean hourly visibility in Seoul in 2018 was 14368.26 meters, with a standard deviation of 6082.987 meters.\n\nmean(bike_data$`Dew point temperature(°C)`)\n\n[1] 4.073813\n\nsd(bike_data$`Dew point temperature(°C)`)\n\n[1] 13.06037\n\n\nThe mean hourly dew point temperature in Seoul in 2018 was 4.073813°C, with a standard deviation of 13.06037°C.\n\nmean(bike_data$`Solar Radiation (MJ/m2)`)\n\n[1] 0.5691107\n\nsd(bike_data$`Solar Radiation (MJ/m2)`)\n\n[1] 0.8687462\n\n\nThe mean hourly solar radiation level in Seoul in 2018 was 0.5691107 MJ/m2, with a standard deviation of 0.8687462 MJ/m2.\n\nmean(bike_data$`Rainfall(mm)`)\n\n[1] 0.1486872\n\nsd(bike_data$`Rainfall(mm)`)\n\n[1] 1.128193\n\n\nThe mean hourly rainfall in Seoul in 2018 was 0.1486872mm, with a standard deviation of 1.128193mm.\n\nmean(bike_data$`Snowfall (cm)`)\n\n[1] 0.07506849\n\nsd(bike_data$`Snowfall (cm)`)\n\n[1] 0.4367462\n\n\nThe mean hourly snowfall in Seoul in 2018 was 0.07506849cm, with a standard deviation of 0.4367462cm.\n\n# check unique levels of categorical variables\nunique(bike_data$Seasons)\n\n[1] \"Winter\" \"Spring\" \"Summer\" \"Autumn\"\n\nunique(bike_data$Holiday)\n\n[1] \"No Holiday\" \"Holiday\"   \n\nunique(bike_data$`Functioning Day`)\n\n[1] \"Yes\" \"No\" \n\n# convert to Date variable to date type using lubridate package\nbike_data &lt;- bike_data |&gt; \n  mutate(date = dmy(Date)) |&gt; \n  select(-Date)\n\n# convert character variables to factors\nbike_data &lt;- bike_data |&gt; \n  mutate(\n    season = as.factor(Seasons),\n    holiday = as.factor(Holiday),\n    functioning_day = as.factor(`Functioning Day`)\n  ) |&gt; \n  select(-c(Seasons, Holiday, `Functioning Day`))\n\n# rename column names that need to be fixed\nbike_data |&gt; names()\n\n [1] \"Rented Bike Count\"         \"Hour\"                     \n [3] \"Temperature(°C)\"           \"Humidity(%)\"              \n [5] \"Wind speed (m/s)\"          \"Visibility (10m)\"         \n [7] \"Dew point temperature(°C)\" \"Solar Radiation (MJ/m2)\"  \n [9] \"Rainfall(mm)\"              \"Snowfall (cm)\"            \n[11] \"date\"                      \"season\"                   \n[13] \"holiday\"                   \"functioning_day\"          \n\nbike_data &lt;- bike_data |&gt; \n  rename(\n    \"bike_count\" = \"Rented Bike Count\",\n    \"hour\" = \"Hour\",\n    \"temperature\" = \"Temperature(°C)\",\n    \"humidity\" = \"Humidity(%)\",\n    \"wind_speed\" = \"Wind speed (m/s)\",\n    \"visibility\" = \"Visibility (10m)\",\n    \"dew_point_temp\" = \"Dew point temperature(°C)\",\n    \"solar_radiation\" = \"Solar Radiation (MJ/m2)\",\n    \"rainfall\" = \"Rainfall(mm)\",\n    \"snowfall\" = \"Snowfall (cm)\"\n  )\n\nbike_data |&gt; names()\n\n [1] \"bike_count\"      \"hour\"            \"temperature\"     \"humidity\"       \n [5] \"wind_speed\"      \"visibility\"      \"dew_point_temp\"  \"solar_radiation\"\n [9] \"rainfall\"        \"snowfall\"        \"date\"            \"season\"         \n[13] \"holiday\"         \"functioning_day\"\n\n\nThe above code makes the bike rental data easier to work with in several. When the data was read in, Date was included as a character variable, but after using the dmy() function from the lubridate package, the date variable (now lowercase) is of the date data type. After looking at the unique levels of each other character variable, the remaining character variables have been stored as factors, with their names updated to be more compatible with R.\nAll the numeric variables also had their names updated, so now every variable in our data set has lower, snake-case variable names.\n\n# summary stats across categorical variables (especially for rented bike count)\n# mean and standard deviation of bikes rented per hour grouped by season\nbike_data |&gt; \n  group_by(season) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 4 × 3\n  season mean_rentals sd_rentals\n  &lt;fct&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn         820.       651.\n2 Spring         730.       622.\n3 Summer        1034.       690.\n4 Winter         226.       150.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by the season.\n\n# mean and standard deviation of bikes rented per hour grouped by whether is it a holiday or not\nbike_data |&gt; \n  group_by(holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  holiday    mean_rentals sd_rentals\n  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Holiday            500.       571.\n2 No Holiday         715.       647.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by whether it is a holiday.\n\n# mean and standard deviation of bikes rented per hour grouped by whether the bike rental place is available (will be mean and sd 0 when non-functional hours)\nbike_data |&gt; \n  group_by(functioning_day) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  functioning_day mean_rentals sd_rentals\n  &lt;fct&gt;                  &lt;dbl&gt;      &lt;dbl&gt;\n1 No                        0          0 \n2 Yes                     729.       642.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by whether it is functioning hours. During non-functioning hours, it makes sense that there are no bike rentals to observe.\n\n# # mean and standard deviation of bikes rented per hour grouped by season and whether it is a holiday\nbike_data |&gt; \n  group_by(season, holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n`summarise()` has grouped output by 'season'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 8 × 4\n# Groups:   season [4]\n  season holiday    mean_rentals sd_rentals\n  &lt;fct&gt;  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn Holiday            758.       660.\n2 Autumn No Holiday         823.       651.\n3 Spring Holiday            635.       609.\n4 Spring No Holiday         733.       622.\n5 Summer Holiday           1022.       564.\n6 Summer No Holiday        1034.       693.\n7 Winter Holiday            157.       108.\n8 Winter No Holiday         232.       152.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by both the season and whether it is a holiday.\n\n# summarize across days, so there is only one observation for each day\nbike_data &lt;- bike_data |&gt; \n  group_by(date, season, holiday) |&gt; \n  summarize(\n    bike_count = sum(bike_count),\n    rainfall = sum(rainfall),\n    snowfall = sum(snowfall),\n    mean_temp = mean(temperature),\n    mean_humidity = mean(humidity),\n    mean_wind_speed = mean(wind_speed),\n    mean_visibility = mean(visibility),\n    mean_dew_point = mean(dew_point_temp),\n    mean_solar_rad = mean(solar_radiation)\n  )\n\n`summarise()` has grouped output by 'date', 'season'. You can override using\nthe `.groups` argument.\n\n\nThe above code summarizes across days, so bike_data now stores daily bike rental data instead of hourly data. bike_count, rainfall, and snowfall now store the daily totals instead of hourly totals. All the other numeric variables tracking the weather store daily averages.\n\n# recreate above summary stats\n# mean and standard deviation of bikes rented per day grouped by season\nbike_data |&gt; \n  group_by(season) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 4 × 3\n  season mean_rentals sd_rentals\n  &lt;fct&gt;         &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn       19670.      9398.\n2 Spring       17521.      8672.\n3 Summer       24818.      7297.\n4 Winter        5413.      1808.\n\n\nThe above table gives us the mean and standard deviation of daily bike rentals in Seoul in 2018, grouped by the season.\n\n# mean and standard deviation of bikes rented per day grouped by whether is it a holiday or not\nbike_data |&gt; \n  group_by(holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n# A tibble: 2 × 3\n  holiday    mean_rentals sd_rentals\n  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Holiday          11994.     10621.\n2 No Holiday       17165.     10191.\n\n\nThe above table gives us the mean and standard deviation of daily bike rentals in Seoul in 2018, grouped by whether it is a holiday.\n\n# # mean and standard deviation of bikes rented per day grouped by season and whether it is a holiday\nbike_data |&gt; \n  group_by(season, holiday) |&gt; \n  summarize(\n    mean_rentals = mean(bike_count),\n    sd_rentals = sd(bike_count)\n  )\n\n`summarise()` has grouped output by 'season'. You can override using the\n`.groups` argument.\n\n\n# A tibble: 8 × 4\n# Groups:   season [4]\n  season holiday    mean_rentals sd_rentals\n  &lt;fct&gt;  &lt;fct&gt;             &lt;dbl&gt;      &lt;dbl&gt;\n1 Autumn Holiday          18204.     11288.\n2 Autumn No Holiday       19756.      9349.\n3 Spring Holiday          15247.     10917.\n4 Spring No Holiday       17597.      8653.\n5 Summer Holiday          24532.      8438.\n6 Summer No Holiday       24824.      7324.\n7 Winter Holiday           3759       1561.\n8 Winter No Holiday        5574.      1757.\n\n\nThe above table gives us the mean and standard deviation of hourly bike rentals in Seoul in 2018, grouped by both the season and whether it is a holiday.\n\n# plot the data to explore relationships\n# plot rented bikes by day, grouped by holiday\nggplot(data = bike_data, aes(x = date, y = bike_count, colour = holiday)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Whether it is a Holiday\",\n    x = \"Date\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Holiday?\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented per day in Seoul in 2018, with the points colored by whether the day was a holiday.\n\n# plot rented bikes by rainfall, grouped by season\nggplot(data = bike_data, aes(x = rainfall, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Rainfall (mm)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the total rainfall that day. The points are colored by the season of the day. It makes sense that many of the points are at 0 on the x-axis, as many days have no rain at all.\n\n# plot rented bikes by snowfall, grouped by season\nggplot(data = bike_data, aes(x = snowfall, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Snowfall (cm)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the total snowfall that day. The points are colored by the season of the day. It makes sense that many of the points are at 0 on the x-axis, as many days have no snow at all. All of the points not at 0 on the x-axis are in the Autumn or Winter, with the majority in the Winter, which makes sense as these are the coldest months in the Northern Hemisphere.\n\n# plot rented bikes by humidity, grouped by season\nggplot(data = bike_data, aes(x = mean_humidity, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Humidity for the Day (%)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average humidity that day. The points are colored by the season of the day.\n\n# plot rented bikes by temperature, grouped by season\nggplot(data = bike_data, aes(x = mean_temp, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Temperature for the Day (°C)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average temperature that day. The points are colored by the season of the day. It appears the there is a positive correlation between temperature and daily bike rentals, possibly because people are more likely to want to do outdoor activities like ride a bike when it is warmer outside. However, there may be some non-linear effect, where when the temperature gets too high, the number of bike rentals goes down, as people feel it is too hot.\n\n# plot rented bikes by solar radiation, grouped by season\nggplot(data = bike_data, aes(x = mean_solar_rad, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Solar Radiation for the Day (MJ/m2)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average solar radiation that day. The points are colored by the season of the day. It appears the there is a positive correlation between solar radiation and daily bike rentals, possibly because people are more likely to want to do outdoor activities like ride a bike when it is sunny outside.\n\n# plot rented bikes by visibility, grouped by season\nggplot(data = bike_data, aes(x = mean_visibility, y = bike_count, colour = season)) + \n  geom_point() + \n  labs(\n    title = \"Daily Bike Rentals in Seoul\",\n    subtitle = \"Colored by Season\",\n    x = \"Average Visibility for the Day (10m)\",\n    y = \"Number of Bikes Rented\"\n  ) + \n  scale_color_discrete(name = \"Season:\")\n\n\n\n\n\n\n\n\nThe above scatter plot shows how many bikes were rented in day based on the average visibility that day. The points are colored by the season of the day.\n\n# report correlations for all the numeric variables in the data\ncor(bike_data |&gt; \n      ungroup() |&gt; \n      select(where(is.numeric)), \n    method = \"pearson\")\n\n                 bike_count    rainfall    snowfall   mean_temp mean_humidity\nbike_count       1.00000000 -0.21425244 -0.24083601  0.69982423    0.02815752\nrainfall        -0.21425244  1.00000000 -0.02249252  0.13981161    0.52824072\nsnowfall        -0.24083601 -0.02249252  1.00000000 -0.26795142    0.06424711\nmean_temp        0.69982423  0.13981161 -0.26795142  1.00000000    0.40146073\nmean_humidity    0.02815752  0.52824072  0.06424711  0.40146073    1.00000000\nmean_wind_speed -0.17485945 -0.08107366  0.02079190 -0.25895565   -0.22416837\nmean_visibility  0.14537586 -0.21828398 -0.10129611  0.01057752   -0.55648011\nmean_dew_point   0.60264807  0.26064386 -0.21082326  0.96261370    0.63026510\nmean_solar_rad   0.68406924 -0.32323141 -0.23149054  0.54348190   -0.27353406\n                mean_wind_speed mean_visibility mean_dew_point mean_solar_rad\nbike_count          -0.17485945      0.14537586      0.6026481      0.6840692\nrainfall            -0.08107366     -0.21828398      0.2606439     -0.3232314\nsnowfall             0.02079190     -0.10129611     -0.2108233     -0.2314905\nmean_temp           -0.25895565      0.01057752      0.9626137      0.5434819\nmean_humidity       -0.22416837     -0.55648011      0.6302651     -0.2735341\nmean_wind_speed      1.00000000      0.19038959     -0.2841044      0.1076893\nmean_visibility      0.19038959      1.00000000     -0.1458334      0.2646339\nmean_dew_point      -0.28410440     -0.14583339      1.0000000      0.3774974\nmean_solar_rad       0.10768927      0.26463391      0.3774974      1.0000000\n\n\nThe above table is a correlation matrix of all the numeric variables in our data set. The most important row and column concerning bike rentals is the first row and first column (which give the same information). This row/column tells us the direction and strength of the linear relationships between daily bike rentals in Seoul and the other numeric variables in our relationship. Positive numbers indicate a positive relationship, while negative numbers indicate a negative, or inverse, relationship. The closer to 1 or -1, the stronger the linear relationship is. The closer to 0, the weaker the linear relationship is."
  },
  {
    "objectID": "basic_modeling_practice.html#split-the-data",
    "href": "basic_modeling_practice.html#split-the-data",
    "title": "ST 558 Homework 8",
    "section": "Split the Data",
    "text": "Split the Data\n\n# set seed so the results are replicable\nset.seed(2824)\n\n# split the data into a 75/25 training/test split, stratify the split by seasons\nbike_split &lt;- initial_split(bike_data, prop = 0.75, strata = season)\n\n# save the 75% split as training\nbike_train &lt;- training(bike_split)\n\n# save the 25% split as testing\nbike_test &lt;- testing(bike_split)\n\n# view the training and testing sets\nbike_train\n\n# A tibble: 273 × 12\n# Groups:   date, season [273]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-09-01 Autumn No Holiday      26010      0          0      25.5\n 2 2018-09-02 Autumn No Holiday      26881      0          0      25.0\n 3 2018-09-03 Autumn No Holiday      10802     34.5        0      23.6\n 4 2018-09-05 Autumn No Holiday      31114      0          0      23.8\n 5 2018-09-08 Autumn No Holiday      29813      0          0      21.7\n 6 2018-09-09 Autumn No Holiday      28354      0          0      22.0\n 7 2018-09-11 Autumn No Holiday      31694      0          0      21.6\n 8 2018-09-12 Autumn No Holiday      31809      0          0      22.5\n 9 2018-09-13 Autumn No Holiday      30991      0          0      23.4\n10 2018-09-14 Autumn No Holiday      28199      0.5        0      23.5\n# ℹ 263 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\nbike_test\n\n# A tibble: 92 × 12\n# Groups:   date, season [92]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2017-12-07 Winter No Holiday       8549      0       10.4      1.09\n 2 2017-12-14 Winter No Holiday       6398      0        0       -6.87\n 3 2017-12-20 Winter No Holiday       4568      0.2     48.3     -4.29\n 4 2017-12-24 Winter Holiday          2014     20        0        3.46\n 5 2017-12-25 Winter Holiday          3966      0        0       -2.09\n 6 2017-12-28 Winter No Holiday       6594      0        0       -2.58\n 7 2018-01-03 Winter No Holiday       6512      0        0       -4.48\n 8 2018-01-04 Winter No Holiday       6453      0        0       -4.8 \n 9 2018-01-06 Winter No Holiday       5180      0        0       -2.75\n10 2018-01-08 Winter No Holiday       5711      0.9      4.5      1.42\n# ℹ 82 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n\nAbove, we can see the heads of our training and test data sets. Using the tidymodels package, we split 75% of our bike rental data into the training set, which we will use to train our models, and the remaining 25% of the data makes up the test set, which will be used to test how effective our models are. The split was stratified by the season variable, so each data set will include a proportional number of observations from each season. Our training data set has 273 observations, while our test data set has 92.\n\n# want to create a 10 fold CV split on our training data\n# create a function to do so (same as in notes from github pages)\nget_cv_splits &lt;- function(data, num_folds){\n  #get fold size\n  size_fold &lt;- floor(nrow(data)/num_folds)\n  #get random indices to subset the data with\n  random_indices &lt;- sample(1:nrow(data), size = nrow(data), replace = FALSE)\n  #create a list to save our folds in\n  folds &lt;- list()\n  #now cycle through our random indices vector and take the appropriate observations to each fold\n  for(i in 1:num_folds){\n    if (i &lt; num_folds) {\n      fold_index &lt;- seq(from = (i-1)*size_fold +1, to = i*size_fold, by = 1)\n      folds[[i]] &lt;- data[random_indices[fold_index], ]\n    } else {\n      fold_index &lt;- seq(from = (i-1)*size_fold +1, to = length(random_indices), by = 1)\n      folds[[i]] &lt;- data[random_indices[fold_index], ]\n    }\n  }\n  return(folds)\n}\n\n# save the results in folds\nfolds &lt;- get_cv_splits(bike_train, 10)\n\n# view the 10 fold CV\nfolds\n\n[[1]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-07-08 Summer No Holiday      30080      0          0     23.0 \n 2 2018-11-28 Autumn No Holiday      16524      0          0      5.30\n 3 2018-09-02 Autumn No Holiday      26881      0          0     25.0 \n 4 2018-03-14 Spring No Holiday      19180      0          0     16.8 \n 5 2018-06-09 Summer No Holiday      25911      0.5        0     23.7 \n 6 2018-10-28 Autumn No Holiday      11589      5.5        0      8.41\n 7 2018-09-18 Autumn No Holiday          0      0          0     21.8 \n 8 2018-02-17 Winter Holiday          3118      0          0     -2.89\n 9 2018-07-25 Summer No Holiday      25918      0          0     30.3 \n10 2018-10-15 Autumn No Holiday      26198      0          0     15.1 \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[2]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-11-20 Autumn No Holiday      19127      0          0     6.23 \n 2 2018-04-08 Spring No Holiday       6666      3          0     3.81 \n 3 2017-12-05 Winter No Holiday       8307      0          0    -4.46 \n 4 2018-04-09 Spring No Holiday      19082      0          0     7.48 \n 5 2018-11-22 Autumn No Holiday      16496      0          0     2.65 \n 6 2018-09-27 Autumn No Holiday      30789      0          0    18.8  \n 7 2018-08-03 Summer No Holiday      20794      0          0    33.2  \n 8 2018-06-01 Summer No Holiday      31928      0          0    23.7  \n 9 2018-07-11 Summer No Holiday      24135      3.5        0    26.6  \n10 2017-12-09 Winter No Holiday       7233      0          0    -0.846\n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[3]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-07-02 Summer No Holiday       5240     61.5      0     22.4   \n 2 2018-09-25 Autumn Holiday         23350      0        0     17.5   \n 3 2018-05-01 Spring Holiday         26820      0        0     20.3   \n 4 2018-01-27 Winter No Holiday       2693      0        4.4  -10.4   \n 5 2018-04-29 Spring No Holiday      25349      0        0     15.9   \n 6 2017-12-04 Winter No Holiday       8729      0.1      0     -0.304 \n 7 2017-12-06 Winter No Holiday       6669      1.3      8.6    0.0458\n 8 2018-10-13 Autumn No Holiday      25542      0        0     12.4   \n 9 2018-04-27 Spring No Holiday      25861      0        0     15.6   \n10 2018-05-18 Spring No Holiday      16087      7.5      0     16.9   \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[4]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-05-22 Spring Holiday         13790      9        0       18.2 \n 2 2018-03-07 Spring No Holiday      11170      0        0        6.19\n 3 2018-05-12 Spring No Holiday       3034     31.5      0       14.2 \n 4 2018-11-17 Autumn No Holiday      15689      0        0        4.98\n 5 2018-10-19 Autumn No Holiday      27437      0        0       13.1 \n 6 2018-02-14 Winter No Holiday       6771      0        0        3.60\n 7 2018-03-29 Spring No Holiday      17450      0        0       15.5 \n 8 2017-12-10 Winter No Holiday       3453      4.1     32.5      1.19\n 9 2018-08-08 Summer No Holiday      23880      0        0       30.9 \n10 2018-08-20 Summer No Holiday      26827      0        0       29.0 \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[5]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-11-24 Autumn No Holiday       6477     10.9     78.7      2.4 \n 2 2018-03-22 Spring No Holiday      14007      0        0        4.85\n 3 2018-02-05 Winter No Holiday       3932      0        0       -9.4 \n 4 2018-08-14 Summer No Holiday      23836      0        0       31.5 \n 5 2018-11-21 Autumn No Holiday      15732      1.2      0        6.25\n 6 2018-02-26 Winter No Holiday       9247      0        0        2.72\n 7 2018-03-15 Spring No Holiday       6227     27        0       13   \n 8 2018-06-30 Summer No Holiday      20479     14.5      0       24.4 \n 9 2018-07-20 Summer No Holiday      26699      0        0       29.4 \n10 2018-01-15 Winter No Holiday       6334      0.2      0        4.71\n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[6]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-10-12 Autumn No Holiday      26237        0        0    10.8  \n 2 2018-03-26 Spring No Holiday      13084        0        0    10.8  \n 3 2018-09-12 Autumn No Holiday      31809        0        0    22.5  \n 4 2018-02-21 Winter No Holiday       7491        0        0    -0.917\n 5 2017-12-01 Winter No Holiday       9539        0        0    -2.45 \n 6 2018-06-14 Summer No Holiday      23818       29        0    21.7  \n 7 2018-04-16 Spring No Holiday      23198        0        0    11.4  \n 8 2017-12-26 Winter No Holiday       5605        0        0    -3.27 \n 9 2018-09-20 Autumn No Holiday      14282        5        0    19.0  \n10 2018-02-11 Winter No Holiday       2850        0        0    -5.99 \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[7]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-05-14 Spring No Holiday      27793      0        0       17.7 \n 2 2018-10-05 Autumn No Holiday       4522     35.5      0       17.1 \n 3 2018-01-10 Winter No Holiday       4161      0.8     10.2     -7.03\n 4 2018-03-27 Spring No Holiday      14710      0        0       13.1 \n 5 2018-07-09 Summer No Holiday       6191      8.5      0       21.0 \n 6 2018-01-24 Winter No Holiday       3154      0       19.7    -14.1 \n 7 2018-08-18 Summer No Holiday      26398      0        0       26.5 \n 8 2018-07-14 Summer No Holiday      25814      0        0       27.9 \n 9 2018-06-28 Summer No Holiday      21647     26.5      0       23.4 \n10 2018-06-29 Summer No Holiday      30297      6.5      0       24.7 \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[8]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-08-06 Summer No Holiday      19171      6.5      0     30.7   \n 2 2018-07-07 Summer No Holiday      31076      0        0     23.8   \n 3 2018-01-31 Winter No Holiday       3830      0       64.8   -2.19  \n 4 2018-01-07 Winter No Holiday       4714      0        0     -1.21  \n 5 2018-01-14 Winter No Holiday       4225      0        0      0.0208\n 6 2018-10-08 Autumn No Holiday      29362      0        0     14.7   \n 7 2018-01-21 Winter No Holiday       4973      0        0      0.392 \n 8 2018-04-22 Spring No Holiday       6852     13.5      0     16.0   \n 9 2018-01-17 Winter No Holiday       6292      0        0      4.55  \n10 2018-03-17 Spring No Holiday      15389      0        0      6.38  \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[9]]\n# A tibble: 27 × 12\n# Groups:   date, season [27]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-11-04 Autumn No Holiday      20471      0          0     11.7 \n 2 2018-04-13 Spring No Holiday      23240      0          0     14.3 \n 3 2018-07-10 Summer No Holiday      20641     21.5        0     23.3 \n 4 2018-02-07 Winter No Holiday       4697      0          0     -8.32\n 5 2018-09-15 Autumn No Holiday      25079      0.2        0     23.2 \n 6 2018-11-18 Autumn No Holiday      14319      0          0      5.88\n 7 2018-05-04 Spring No Holiday      26670      0          0     13.8 \n 8 2018-07-17 Summer No Holiday      28435      0          0     28.1 \n 9 2018-05-21 Spring No Holiday      31236      0          0     17.7 \n10 2018-09-19 Autumn No Holiday          0      0.2        0     22.2 \n# ℹ 17 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n[[10]]\n# A tibble: 30 × 12\n# Groups:   date, season [30]\n   date       season holiday    bike_count rainfall snowfall mean_temp\n   &lt;date&gt;     &lt;fct&gt;  &lt;fct&gt;           &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 2018-05-10 Spring No Holiday          0      0          0     15.5 \n 2 2018-03-21 Spring No Holiday       7384      1          0      2.13\n 3 2018-04-30 Spring No Holiday      25462      0          0     18.8 \n 4 2018-06-03 Summer No Holiday      29761      0          0     23.7 \n 5 2018-07-19 Summer No Holiday      27820      0          0     28.6 \n 6 2018-06-13 Summer No Holiday      36149      0          0     22.0 \n 7 2018-04-07 Spring No Holiday      11159      0.2        0      4.21\n 8 2018-04-25 Spring No Holiday      26285      0          0     14.2 \n 9 2018-05-06 Spring No Holiday      14556     22          0     16.9 \n10 2018-03-16 Spring No Holiday      15277      0          0      7.35\n# ℹ 20 more rows\n# ℹ 5 more variables: mean_humidity &lt;dbl&gt;, mean_wind_speed &lt;dbl&gt;,\n#   mean_visibility &lt;dbl&gt;, mean_dew_point &lt;dbl&gt;, mean_solar_rad &lt;dbl&gt;\n\n\nIn the above code, we created a function that allows us to do cross validation on a data set with a certain number of folds. We then used this to do 10 fold cross validation on the training set from our bike rental data, with the heads of each fold returned above. Each fold contains 27 observations, except the tenth fold, which contains 30."
  },
  {
    "objectID": "basic_modeling_practice.html#fitting-mlr-models",
    "href": "basic_modeling_practice.html#fitting-mlr-models",
    "title": "ST 558 Homework 8",
    "section": "Fitting MLR Models",
    "text": "Fitting MLR Models"
  }
]